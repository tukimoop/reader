//
// Helper Functions
//




@function k-unitless($number) {
    @if type-of($number) == 'number' and not unitless($number) {
        @return $number / ($number * 0 + 1);
    }

    @return $number;
}

@function k-get($map, $keys...) {
    @if length($keys) == 1 {
        $keys: nth($keys, 1);
    }

    $warn: "#{nth($keys, 1)}";
    $length: length($keys);
    $get: map-get($map, nth($keys, 1));

    @if $length > 1 {
        @for $i from 2 through $length {
            @if $get != null and type-of($get) == 'map' {
                $warn: $warn + "->#{nth($keys, $i)}";
                $get: map-get($get, nth($keys, $i));

                @if $get == null {
                    @return null;
                }
            }
            @else {
                @return k-get-warning($warn, $get, nth($keys, $i));
            }
        }
    }

    @return $get;
}

@function k-has($map, $keys...) {
    @if length($keys) == 1 {
        $keys: nth($keys, 1);
    }

    $warn: "#{nth($keys, 1)}";
    $length: length($keys);
    $get: map-get($map, nth($keys, 1));

    @if $length > 1 {
        @for $i from 2 through $length {
            @if $get != null and type-of($get) == 'map' {
                $warn: $warn + "->#{nth($keys, $i)}";
                $get: map-get($get, nth($keys, $i));

                @if $get == null {
                    @return false;
                }
            }
            @else {
                 @return false;
            }
        }
    }

    @if $get != null {
        @return true;
    } 
    @else {
        @return false;   
    }
}

@function k-get-warning($warn, $get, $key) {
    @if $get == null {
        @warn "Map has no value for key search `#{$warn}`";
    }
    @else if type-of($get) != 'map' {
        @warn "Non-map value found for key search `#{$warn}`, cannot search for key `#{$key}`";
    }
    @return null;
}

@function k-display-color($color) {
    @if (lightness( $color ) > 50) {
      @return darken($color, 50%)
    }
    @else {
      @return lighten($color, 50%)
    }
}

@function k-color-level($code, $level : 0) {
    @if $level == -1 {
        @return lighten($code, 2%);
    } @elseif $level == -2 {
        @return lighten($code, 4%);
    } @elseif $level == -3 {
        @return lighten($code, 6%);
    } @elseif $level == -4 {
        @return lighten($code, 10%);
    } @elseif $level == -5 {
        @return lighten($code, 15%);
    } @elseif $level == -6 {
        @return lighten($code, 20%);
    } @elseif $level == -7 {
        @return lighten($code, 25%);
    } @elseif $level == -8 {
        @return lighten($code, 30%);
    } @elseif $level == -9 {
        @return lighten($code, 35%);
    } @elseif $level == -10 {
        @return lighten($code, 60%);

    } @elseif $level == 1 {
        @return darken($code, 2%);
    } @elseif $level == 2 {
        @return darken($code, 4%);
    } @elseif $level == 3 {
        @return darken($code, 6%);
    } @elseif $level == 4 {
        @return darken($code, 10%);
    } @elseif $level == 5 {
        @return darken($code, 15%);
    } @elseif $level == 6 {
        @return darken($code, 20%);
    } @elseif $level == 7 {
        @return darken($code, 25%);
    } @elseif $level == 8 {
        @return darken($code, 30%);
    } @elseif $level == 9 {
        @return darken($code, 35%);
    } @elseif $level == 10 {
        @return darken($code, 40%);
    } @else {
        @return $code;
    }
}

@function k-grey-color($level: 0) {
    @return k-get($k-base-grey-colors, $level);
}

@function k-font-color($level: 0) {
    @return k-get($k-base-font-colors, $level);
}

@function k-state-color($name, $type: null) {
    @if ($type == null) {
        $type: base;
    }

    @return k-get($k-state-colors, $name, $type);  
}

@function k-brand-color($type: null) {
    @return k-state-color(brand, $type);  
}

@function k-media-breakpoint($type) {
    @if ($k-media-breakpoints) {
        @return k-get($k-media-breakpoints, $type);
    }    
}